---
title: 
bibliography: CogSci2022-giannino.bib
csl: apa6.csl
document-params: "10pt, letterpaper"

author-information: 

abstract:

keywords:
    
output: cogsci2016::cogsci_paper
#final-submission: \cogscifinalcopy
---

```{r global_options, include = FALSE}
knitr::opts_chunk$set(fig.width = 3, fig.height = 3, fig.crop  =  FALSE, 
                      fig.pos  =  "tb", fig.path = 'figs/',
                      echo = FALSE, warning = FALSE, cache = FALSE, 
                      message = FALSE, sanitize = TRUE)
```

```{r, libraries}
library(tidyverse)
library(lubridate)
library(broom)
library(broom.mixed)
library(lme4)
library(lmerTest)
library(gghalves)
```

```{r, data-prep}
raw.data <- read_csv("../data/usable.data_20220106.csv") %>%
    mutate(hour = hour(timestamp), 
    tod = case_when(
      hour < 11 ~ "morning", 
      hour >= 11 & hour <= 13 ~ "midday", 
      hour > 13 ~ "afternoon"), 
    tod = factor(tod, levels = c("morning", "midday", "afternoon")), 
  object_type = factor(object_type, 
                       levels = c("Other Synthetic Object", "Food", "Tool", 
                                  "Toy", "Other Natural Object", "Large Immovable"),
                       labels = c("Synthetic", "Food", "Tool", 
                                  "Toy", "Natural", "Immovable")))

# TO DO: manual checking so this isn't necessary
object.data <- raw.data %>%
  select(-category, -object_type) %>%
  distinct()

category.data <- raw.data %>%
  select(-object)

# current workaround for multiple categories issue (far from perfect)
object.bycategory <- raw.data %>%
  group_by(object, object_type) %>%
  summarize(n.category = n()) %>%
  ungroup() %>%
  group_by(object) %>%
  filter(n.category == max(n.category)) %>%
  select(-n.category)

site_colors <- c("Rossel" = "#3C5388", 
                 "Tseltal" = "#02A087")
```

# Introduction

The artifacts of everyday life reflect our routines, aspirations, relationships, and much more. In particular, objects that are regularly picked up and handled---a coffee cup, a laptop, a baby bottle---offer a window into the physical, social, and cultural contexts that shape each individual's understanding of the world. In this paper, we explore object handling as a glimpse into everyday life at its roots, from early infancy until age four.
<!--mc: I feel very REF-less at this point. I'm going to look into the Ochs et al. CELF study for some more inspiration on background here-->

For young learners, objects and their associated activities form a critical source of input for social learning, including the ways in which they are exposed to language relating to those objects (yu/smithetc REFS; see also @herzberg2021infant for an overview of object play and motor learning). Critically, however, this object-centered input changes enormously across the first few years due to both maturational constraints and culture-specific caregiving practices. In early infancy, children have little ability to hold things or to control their posture, primarily experiencing objects through what others bring into contact with their bodies or through what appears in their visual field (faces may make up a much greater proportion of their social input at this point; fauseyREF). However, later gains in manual dexterity and gross motor skill (e.g., sitting, crawling, walking) increasingly widen their ability to seek, reach, and grab a diversity of objects in their environment<!-- :P ---including those meant to be out of reach, EDNA--> and give them greater control over what they handle, how, and for how long (REFS). Separately, children's access to objects is shaped by culture-specific practices for carrying them, keeping them safe and warm, and scaffolding the development of valued capacities (e.g., word learning in many US families, walking in Kenyan Kipsigis families, @super1976environmental), all of which may slightly alter the course of motor development (see @adolph2010motor for an overview).

<!--
- more broadly expect cultural differences in the types and diversity of artifacts
- coming back to the main point here ... object-centered input as a dynamic source of input that both reflects and reinforces social systems
-->







# Methods
## Corpus

## Manual annotation

## Reliability

# Results
## Overall frequency statistics
```{r, daily-object-stats, results = "hide"}

daily.objects <- object.data %>%
  group_by(sub_num) %>%
  summarize(n.objects = length(unique(object))) %>%
  ungroup() %>%
  summarize(mean = mean(n.objects), 
            median = median(n.objects), 
            sd = sd(n.objects), 
            min = min(n.objects),
            max = max(n.objects)) %>%
  mutate(across(mean:sd), round(., 2))

daily.objects.bysite <- object.data %>%
  group_by(sub_num, site) %>%
  summarize(n.objects = length(unique(object))) 

# t-test assumptions not met -> use wilcox
shapiro.test(subset(daily.objects.bysite, daily.objects.bysite$site == "Rossel")$n.objects)
shapiro.test(subset(daily.objects.bysite, daily.objects.bysite$site == "Tseltal")$n.objects)
var.test(n.objects ~ site, daily.objects.bysite)
comp.daily.objects <- tidy(wilcox.test(n.objects ~ site, daily.objects.bysite))

ranked.objects.list <- list()
for (i in c("Rossel", "Tseltal")) {
  ranked.objects <- object.data %>%
    filter(site == i) %>%
    mutate(total.kids = length(unique(sub_num))) %>%
    group_by(object) %>%
    summarize(n.kids = length(unique(sub_num)), 
              total.kids = total.kids, 
              prop = n.kids/total.kids) %>%
    ungroup() %>%
    distinct() %>%
    arrange(desc(prop)) %>%
    mutate(rank = row_number(), 
           site = i) 
  ranked.objects.list[[i]] <- ranked.objects
}
all.ranked.objects <- do.call(rbind, ranked.objects.list)

ros.objects <- all.ranked.objects %>%
  filter(site == "Rossel") %>%
  pull(object)

tse.objects <- all.ranked.objects %>%
  filter(site == "Tseltal") %>%
  pull(object)

ros.top.objects <- all.ranked.objects %>%
  filter(site == "Rossel" & rank <= 25) %>%
  pull(object)

tse.top.objects <- all.ranked.objects %>%
  filter(site == "Tseltal" & rank <= 25) %>%
  pull(object)
```
Across the entire waking day, children handled an average of `r daily.objects$mean` unique objects (median = `r daily.objects$median`, _SD_ = `r daily.objects$sd`, range = `r daily.objects$min`--`r daily.objects$max`), with no significant differences across sites (_M_~_Rossel_~ = `r round(mean(subset(daily.objects.bysite, daily.objects.bysite$site == "Rossel")$n.objects), 2)`, _M_~_Tseltal_~ = `r round(mean(subset(daily.objects.bysite, daily.objects.bysite$site == "Tseltal")$n.objects), 2)`, _W_ = `r comp.daily.objects$statistic`, _p_ = `r round(comp.daily.objects$p.value, 3)`). Only `r round(length(intersect(ros.objects, tse.objects))/length(unique(raw.data$object)),4)*100`% of objects were present in both communities, but several of these shared objects were among the most frequently handled by children in both sites. In fact, among the top 25 most common objects, `r length(intersect(ros.top.objects, tse.top.objects))` were shared across sites. 

```{r, overall-category-stats}
category.props <- category.data %>%
  group_by(sub_num, object_type, site) %>%
  summarize(n.category = n()) %>%
  distinct() %>%
  ungroup() %>% 
  group_by(sub_num, site) %>%
  summarize(n.images = sum(n.category), 
            n.category = n.category, 
            prop = n.category/n.images, 
            object_type = object_type) %>%
  distinct()

wilcox.outputs <- list()
for (i in unique(category.props$object_type)) {
  ros.input <- category.props %>%
    filter(object_type == i & site == "Rossel")
  
  tse.input <- category.props %>%
    filter(object_type == i & site == "Tseltal")
  
  wilcox.output <- tidy(wilcox.test(ros.input$prop, tse.input$prop))
  
  wilcox.outputs[[i]] <- wilcox.output
}

comp.category.bysite <- do.call(rbind, wilcox.outputs) %>%
  rownames_to_column(var = "object_type") %>%
  mutate(p.adjusted = p.adjust(p.value, method = "holm"))

category.means <- category.props %>%
  group_by(object_type, site) %>%
  summarize(mean = mean(prop), 
            sd = sd(prop), 
            n = n(), 
            se = sd/sqrt(n))

top.category.bychild <- category.props %>%
  group_by(sub_num) %>%
  filter(prop == max(prop) & object_type %in% c("Synthetic", "Food")) %>%
  nrow()

top.synthetic <- raw.data %>%
  filter(object_type == "Synthetic") %>%
  group_by(object) %>%
  summarize(n = n()) %>%
  arrange(desc(n)) %>%
  slice(1:3) %>%
  transmute(top.objects = paste(object, collapse = ", ")) %>%
  distinct() %>%
  pull(top.objects)

top.immovable <- raw.data %>%
  filter(object_type == "Immovable") %>%
  group_by(object) %>%
  summarize(n = n()) %>%
  arrange(desc(n)) %>%
  slice(1:3) %>%
  transmute(top.objects = paste(object, collapse = ", ")) %>%
  distinct() %>%
  pull(top.objects)

hourly.categories <- object.data %>%
  left_join(object.bycategory, by = "object") %>%
  group_by(sub_num, hour) %>%
  summarize(n.categories = length(unique(object_type))) %>%
  ungroup() %>%
  summarize(mean = round(mean(n.categories), 2))
```
The frequency of object categories was similarly divided across sites (Figure 1a). Children primarily handled miscellaneous synthetic objects (e.g., `r top.synthetic`, etc.; _M_~_Rossel_~ = `r round(subset(category.means$mean, category.means$site == "Rossel" & category.means$object_type == "Synthetic"), 4)*100`% of handling, _M_~_Tseltal_~ = `r round(subset(category.means$mean, category.means$site == "Tseltal" & category.means$object_type == "Synthetic"), 4)*100`%) and food (_M_~_Rossel_~ = `r round(subset(category.means$mean, category.means$site == "Rossel" & category.means$object_type == "Food"), 4)*100`%, _M_~_Tseltal_~ = `r round(subset(category.means$mean, category.means$site == "Tseltal" & category.means$object_type == "Food"), 4)*100`%). For `r top.category.bychild` of `r length(unique(raw.data$sub_num))` children, the top category was either synthetic objects or food. Two-tailed Wilcoxon tests revealed only one significant category-level difference between sites: children's handling of large or immovable objects (e.g., `r top.immovable`, etc.), where Rossel children handled these objects more frequently than Tseltal children (_M_~_Rossel_~ = `r round(subset(category.means$mean, category.means$site == "Rossel" & category.means$object_type == "Immovable"), 4)*100`%, _M_~_Tseltal_~ = `r round(subset(category.means$mean, category.means$site == "Tseltal" & category.means$object_type == "Immovable"), 4)*100`%, adjusted _p_ = `r round(subset(comp.category.bysite$p.adjusted, comp.category.bysite$object_type == "Immovable"), 3)`, *p*s for all other categories > 0.05).

```{r, hourly-object-stats}
hourly.objects <- object.data %>%
  group_by(sub_num, hour) %>%
  summarize(n.objects = length(unique(object))) %>%
  ungroup() %>%
  summarize(mean = mean(n.objects), 
            median = median(n.objects), 
            sd = sd(n.objects), 
            min = min(n.objects),
            max = max(n.objects)) %>%
  mutate(across(mean:sd), round(., 2))

# TO DO: deal with kids with 2 recordings
model.data <- object.data %>%
  left_join(object.bycategory, by = "object") %>%
  group_by(site, sub_num, hour, object_type) %>%
  summarize(n.objects = length(unique(object))) %>%
  ungroup()

# TO DO: pick appropriate reference level
model.data$object_type <- relevel(model.data$object_type, ref = "Immovable")
hourly.objects.model <- lmer(n.objects ~ site * object_type + (1|sub_num), model.data) %>%
  tidy() %>%
  filter(effect == "fixed" & term != "(Intercept)" & p.value < 0.05) %>%
  mutate(term = str_remove_all(term, "Tseltal|object_type"))
  
hourly.objects.bycategory <- model.data %>%
  group_by(site, sub_num, object_type) %>%
  summarize(n.objects.bysub = mean(n.objects))
```
During any given hour, children handled `r hourly.objects$mean` objects from `r hourly.categories$mean` different categories, on average (median = `r hourly.objects$median` objects, _SD_ = `r hourly.objects$sd`, range = `r hourly.objects$min`--`r hourly.objects$max`). A linear mixed-effects model with fixed effects of site, object category, and their interaction showed...

```{r fig1, fig.env = "figure", fig.pos = "h", fig.align = "center", fig.width = 3.4, fig.height = 3.4, fig.cap = ""}
category.props.plot <- ggplot() +
  geom_bar(data = category.means, 
           mapping  = aes(x = object_type, y = mean*100, color = site, fill = site),
           stat = "identity", position = "dodge", alpha = 0.7) + 
  geom_point(data = category.props,
             mapping = aes(x = object_type, y = prop*100, color = site, fill = site),
             position = position_jitterdodge(dodge.width = 0.9, jitter.width = 0.1), 
             size = 1.5) +
  geom_errorbar(data = category.means,
                mapping = aes(x = object_type, ymin = (mean - se)*100, 
                              ymax = (mean + se)*100, group = site),
                position = position_dodge(width = 0.9), 
                width = 0.25, size = 0.8, color = "black") +
  scale_color_manual(values = site_colors) +
  scale_fill_manual(values = site_colors) +
  labs(x = "Object Categories", y = "% Handling", color = "Site", fill = "Site") +
  theme_classic(base_size = 15)
#print(category.props.plot)

unique.objects.bycategory.plot <- ggplot(hourly.objects.bycategory, aes(x = object_type, y = n.objects.bysub, color = site, fill = site)) + 
  geom_half_violin(alpha = 0.5, position = position_nudge(x = 0.2), side = "r") +
  geom_point(position = position_jitterdodge(dodge.width = 0.2, jitter.width = 0.05), size = 1) +
  geom_boxplot(width = 0.25, outlier.shape = NA, alpha = 0.5, color = "black") +
    scale_color_manual(values = site_colors) +
  scale_fill_manual(values = site_colors) +
  labs(x = "Object Categories", y = "Unique Objects/Hour", color = "Site", fill = "Site") +
  theme_classic(base_size = 15)
#print(unique.objects.bycategory.plot)
```

## Time of day effects

## Age effects

# Discussion

# References 

```{r}
# References will be generated automatically by Pandoc and included here.
# The following code is some latex to format the bibliography. Do not remove it.
```

\setlength{\parindent}{-0.1in} 
\setlength{\leftskip}{0.125in}
\noindent
